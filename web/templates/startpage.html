{{template "layout" .}}

{{define "content"}}
    {{if .Results}}
        <ol>
          {{range .Results}}
          <li class="list-group-item mb-2 p-3">
              <div class="d-flex justify-content-between align-items-start">
                  <div class="me-3">
                      <span class="badge bg-success text-uppercase" style="font-size:0.75rem;">{{.IndexName}}</span>
                      
                      {{if .IsDir}}
                          <a href="/browse/{{.IndexName}}?path={{.Path}}">
                              <h5 class="d-inline ms-1 mb-1">{{.Name}}</h5>
                          </a>
                      {{else}}
                          <a target="_blank" href="/download/{{.IndexName}}-{{.ID}}">
                              <h5 class="d-inline ms-1 mb-1">{{.Name}}</h5>
                          </a>
                      {{end}}
                      
                      <div class="text-muted small font-monospace">
                            {{$indexName := .IndexName}}
                            {{$fullPath := .Path}}
                            {{$pathSegments := split $fullPath "/"}}
                            {{$currentPath := ""}}
                            
                            {{range $i, $segment := $pathSegments}}
                                {{if and $segment (lt $i (sub (len $pathSegments) 1))}}
                                    {{if eq $i 0}}
                                        {{$currentPath = $segment}}
                                    {{else}}
                                        {{$currentPath = printf "%s/%s" $currentPath $segment}}
                                    {{end}}
                                    / <a href="/browse/{{$indexName | urlquery}}?path={{$currentPath | urlquery}}">{{$segment}}</a>
                                {{end}}
                            {{end}}
                        </div>
                  </div>
                  <div class="text-end">
                      <div class="small text-muted">Last Modified:</div>
                      <div class="mb-1">{{.ModTime.Format "2006-01-02 15:04:05"}}</div>
                      <div class="fw-semibold">{{humanizeBytes .Size}}</div>
                  </div>
              </div>
          </li>
          {{end}}


        </ol>
    {{else}}
      <hr />
      <p>No search results found.</p>
    {{end}}
{{end}}