{{template "layout" .}}

{{define "content"}}
<div class="container">
    <!-- Breadcrumb nawigacja -->
    <div class="row align-items-center mb-4">
        <!-- Kolumna 1: breadcrumb -->
        <div class="col-md-10">
        <nav aria-label="breadcrumb" class="mb-4">
            <ol class="breadcrumb">
                <li class="breadcrumb-item">
                    <span class="badge bg-success text-uppercase me-2">{{.Index}}</span> <a href="/browse/{{.Index}}?path="><i class="bi bi-house-fill text-primary me-2"></i></a>
                </li>
                {{range .Breadcrumbs}}
                    <li class="breadcrumb-item">
                        <a href="/browse/{{$.Index}}?path={{.Path | urlquery}}">{{.Part}}</a>
                    </li>
                {{end}}
            </ol>
        </nav>
        </div>
        <div class="col-md-2 text-md-end mt-2 mt-md-0">
            <div class="small text-muted">
                <span class="me-3">
                    <i class="bi bi-hdd"></i>
                    {{humanizeBytes .DirInfo.Size}}
                </span>
                <span>
                    <i class="bi bi-files"></i>
                    {{.DirInfo.Files}} files
                </span>
            </div>
        </div>
    </div>

    <!-- Lista plików i katalogów -->
    {{if .Items}}
        <div class="list-group list-group-flush">
            {{range .Items}}
                <a href="{{if .IsDir}}/browse/{{$.Index}}?path={{$.Path | addTrailingSlash}}{{.Name | urlquery}}{{else}}/download/{{$.Index}}-{{.ID}}{{end}}"
                   class="list-group-item list-group-item-action d-flex justify-content-between align-items-start p-3"
                   {{if not .IsDir}}target="_blank"{{end}}>
                    <div class="me-3">
                        <i class="bi {{if .IsDir}}bi-folder-fill text-warning{{else}}bi-file-earmark{{end}} me-2"></i>
                        <strong>{{.Name}}</strong>
                        {{if .IsDir}}/{{end}}

                        <div class="text-muted small font-monospace mt-1">
                            {{displayPath .Dir .Path .Name}}
                        </div>
                    </div>
                    <div class="text-end text-muted small">
                        <div>{{.ModTime.Format "2006-01-02 15:04"}}</div>
                        <div class="fw-semibold">{{humanizeBytes .Size}}</div>
                    </div>
                </a>
            {{end}}
        </div>
    {{else}}
        <div class="alert alert-info">
            Katalog jest pusty.
        </div>
    {{end}}

    <!-- Powrót do wyszukiwania -->
    <div class="mt-4">
        <a href="/" class="btn btn-outline-secondary">← Powrót do wyszukiwania</a>
    </div>
</div>
{{end}}