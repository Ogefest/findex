{{define "layout"}}
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="">

    <title>FIndex</title>

    <link href="/assets/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/assets/icons/bootstrap-icons.min.css">
    

  </head>

  <body>

    <nav class="navbar mb-3">
      <div class="container justify-content-center" style="font-family: Monaco,'Liberation Mono', Consolas, 'Courier New',  'Lucida Console', 'DejaVu Sans Mono', monospace;">
        <a class="navbar-brand mx-auto fs-4" href="/"><i class="bi bi-box-seam-fill me-2"></i>FINDEX</a>
      </div>
    </nav>
    
    <div class="container border-bottom mb-3">
      <form class="mb-4" action="/" method="GET">
          <div class="input-group mb-3">
              <input type="search" class="form-control" placeholder="Search" aria-label="Search" name="q" value="{{.Query}}" autofocus>
              <div class="input-group-append">
                  <button class="btn btn-primary" type="submit">Search</button>
              </div>
          </div>
          
          {{if .Indexes}}
          <div class="form-group">
              <div>
              {{range $index := .Indexes}}
                  <div class="form-check form-check-inline">
                      <input class="form-check-input index-checkbox" type="checkbox" name="index[]" value="{{$index}}" id="index_{{$index}}">
                      <label class="form-check-label" for="index_{{$index}}">{{$index}}</label>
                  </div>
              {{end}}
              </div>
          </div>
          {{end}}
      </form>
  </div>

    <main role="main" class="container">

        {{block "content" .}}{{end}}

    </main><!-- /.container -->

    <script src="/assets/bootstrap.min.js"></script>
    <script>
      document.addEventListener('DOMContentLoaded', function() {
          const checkboxes = document.querySelectorAll('.index-checkbox');
          const storageKey = 'findex_checked_indexes';
      
          // Load saved state
          const savedState = JSON.parse(localStorage.getItem(storageKey));
          if (savedState) {
              checkboxes.forEach(checkbox => {
                  if (savedState[checkbox.value] !== undefined) {
                      checkbox.checked = savedState[checkbox.value];
                  }
              });
          }
      
          // Save state on change
          checkboxes.forEach(checkbox => {
              checkbox.addEventListener('change', () => {
                  const currentState = {};
                  checkboxes.forEach(cb => {
                      currentState[cb.value] = cb.checked;
                  });
                  localStorage.setItem(storageKey, JSON.stringify(currentState));
              });
          });
      });
      </script>
  </body>
</html>
{{end}}